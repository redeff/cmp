<html><head><meta http-equiv="content-type" content="text/html; charset=UTF-8"></head><link rel="stylesheet" href="file:///home/redeff/proj/cf_scr/dep/css/prettify.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="file:///home/redeff/proj/cf_scr/dep/css/clear.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="file:///home/redeff/proj/cf_scr/dep/css/style.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="file:///home/redeff/proj/cf_scr/dep/css/ttypography.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="file:///home/redeff/proj/cf_scr/dep/css/problem-statement.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="file:///home/redeff/proj/cf_scr/dep/css/second-level-menu.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="file:///home/redeff/proj/cf_scr/dep/css/roundbox.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="file:///home/redeff/proj/cf_scr/dep/css/datatable.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="file:///home/redeff/proj/cf_scr/dep/css/table-form.css" type="text/css" charset="utf-8" />
<link rel="stylesheet" href="file:///home/redeff/proj/cf_scr/dep/css/topic.css" type="text/css" charset="utf-8" />
<body><div class="ttypography"><div class="problem-statement"><div class="header"><div class="title">D. Jamie and To-do List</div><div class="time-limit"><div class="property-title">time limit per test</div>2 seconds</div><div class="memory-limit"><div class="property-title">memory limit per test</div>512 megabytes</div><div class="input-file"><div class="property-title">input</div>standard input</div><div class="output-file"><div class="property-title">output</div>standard output</div></div><div><p><span class="tex-font-style-it">Why I have to finish so many assignments???</span></p><p>Jamie is getting very busy with his school life. He starts to forget the assignments that he has to do. He decided to write the things down on a to-do list. He assigns a value <span class="tex-font-style-tt">priority</span> for each of his assignment <span class="tex-font-style-bf">(lower value means more important)</span> so he can decide which he needs to spend more time on.</p><p>After a few days, Jamie finds out the list is too large that he can't even manage the list by himself! As you are a good friend of Jamie, help him write a program to support the following operations on the to-do list:</p><ul> <li> <span class="tex-span"><i>set</i> <i>a</i><sub class="lower-index"><i>i</i></sub> <i>x</i><sub class="lower-index"><i>i</i></sub></span> — Add assignment <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> to the to-do list if it is not present, and set its <span class="tex-font-style-tt">priority</span> to <span class="tex-span"><i>x</i><sub class="lower-index"><i>i</i></sub></span>. If assignment <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> is already in the to-do list, its <span class="tex-font-style-tt">priority</span> <span class="tex-font-style-bf">is changed</span> to <span class="tex-span"><i>x</i><sub class="lower-index"><i>i</i></sub></span>. </li><li> <span class="tex-span"><i>remove</i> <i>a</i><sub class="lower-index"><i>i</i></sub></span> — Remove assignment <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> from the to-do list if it is present in it. </li><li> <span class="tex-span"><i>query</i> <i>a</i><sub class="lower-index"><i>i</i></sub></span> — Output the number of assignments that are more important (have a <span class="tex-font-style-bf">smaller</span> <span class="tex-font-style-tt">priority</span> value) than assignment <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span>, so Jamie can decide a better schedule. Output <span class="tex-span"> - 1</span> if <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> is not in the to-do list. </li><li> <span class="tex-span"><i>undo</i> <i>d</i><sub class="lower-index"><i>i</i></sub></span> — Undo all changes that have been made in the previous <span class="tex-span"><i>d</i><sub class="lower-index"><i>i</i></sub></span> days (not including the day of this operation) </li></ul><p>At day <span class="tex-span">0</span>, the to-do list is empty. In each of the following <span class="tex-span"><i>q</i></span> days, Jamie will do <span class="tex-font-style-bf">exactly one</span> out of the four operations. If the operation is a <span class="tex-span"><i>query</i></span>, you should <span class="tex-font-style-bf">output the result of the query before proceeding to the next day</span>, or poor Jamie cannot make appropriate decisions.</p></div><div class="input-specification"><div class="section-title">Input</div><p>The first line consists of a single integer <span class="tex-span"><i>q</i></span> <span class="tex-span">(1 ≤ <i>q</i> ≤ 10<sup class="upper-index">5</sup>)</span> — the number of operations.</p><p>The following <span class="tex-span"><i>q</i></span> lines consists of the description of the operations. The <span class="tex-span"><i>i</i></span>-th line consists of the operation that Jamie has done in the <span class="tex-span"><i>i</i></span>-th day. The query has the following format:</p><p>The first word in the line indicates the type of operation. It must be one of the following four: <span class="tex-font-style-tt">set</span>, <span class="tex-font-style-tt">remove</span>, <span class="tex-font-style-tt">query</span>, <span class="tex-font-style-tt">undo</span>.</p><ul> <li> If it is a <span class="tex-font-style-tt">set</span> operation, a string <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> and an integer <span class="tex-span"><i>x</i><sub class="lower-index"><i>i</i></sub></span> follows <span class="tex-span">(1 ≤ <i>x</i><sub class="lower-index"><i>i</i></sub> ≤ 10<sup class="upper-index">9</sup>)</span>. <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> is the assignment that need to be set to <span class="tex-font-style-tt">priority</span> <span class="tex-span"><i>x</i><sub class="lower-index"><i>i</i></sub></span>. </li><li> If it is a <span class="tex-font-style-tt">remove</span> operation, a string <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> follows. <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> is the assignment that need to be removed. </li><li> If it is a <span class="tex-font-style-tt">query</span> operation, a string <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> follows. <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> is the assignment that needs to be queried. </li><li> If it is a <span class="tex-font-style-tt">undo</span> operation, an integer <span class="tex-span"><i>d</i><sub class="lower-index"><i>i</i></sub></span> follows <span class="tex-span">(0 ≤ <i>d</i><sub class="lower-index"><i>i</i></sub> &lt; <i>i</i>)</span>. <span class="tex-span"><i>d</i><sub class="lower-index"><i>i</i></sub></span> is the number of days that changes needed to be undone. </li></ul><p>All assignment names <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> only consists of lowercase English letters and have a length <span class="tex-span">1 ≤ |<i>a</i><sub class="lower-index"><i>i</i></sub>| ≤ 15</span>.</p><p>It is guaranteed that the last operation is a <span class="tex-font-style-tt">query</span> operation.</p></div><div class="output-specification"><div class="section-title">Output</div><p>For each <span class="tex-font-style-tt">query</span> operation, output a single integer — the number of assignments that have a priority lower than assignment <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span>, or <span class="tex-span"> - 1</span> if <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> is not in the to-do list.</p></div><div><div class="section-title">Interaction</div><p>If the operation is a <span class="tex-span"><i>query</i></span>, you <span class="tex-font-style-bf">should</span> output the result of the query and flush the output stream before proceeding to the next operation. Otherwise, you may get the verdict <span class="tex-font-style-tt">Idleness Limit Exceed</span>.</p><p>For flushing the output stream, please refer to the documentation of your chosen programming language. The flush functions of some common programming languages are listed below:</p><ul> <li> C: <span class="tex-font-style-tt">fflush(stdout);</span> </li><li> C++: <span class="tex-font-style-tt">cout « flush;</span> </li><li> Java: <span class="tex-font-style-tt">System.out.flush();</span> </li></ul></div><div class="sample-tests"><div class="section-title">Examples</div><div class="sample-test"><div class="input"><div class="title">Input</div><pre>8<br />set chemlabreport 1<br />set physicsexercise 2<br />set chinesemockexam 3<br />query physicsexercise<br />query chinesemockexam<br />remove physicsexercise<br />query physicsexercise<br />query chinesemockexam<br /></pre></div><div class="output"><div class="title">Output</div><pre>1<br />2<br />-1<br />1<br /></pre></div><div class="input"><div class="title">Input</div><pre>8<br />set physicsexercise 2<br />set chinesemockexam 3<br />set physicsexercise 1<br />query physicsexercise<br />query chinesemockexam<br />undo 4<br />query physicsexercise<br />query chinesemockexam<br /></pre></div><div class="output"><div class="title">Output</div><pre>0<br />1<br />0<br />-1<br /></pre></div><div class="input"><div class="title">Input</div><pre>5<br />query economicsessay<br />remove economicsessay<br />query economicsessay<br />undo 2<br />query economicsessay<br /></pre></div><div class="output"><div class="title">Output</div><pre>-1<br />-1<br />-1<br /></pre></div><div class="input"><div class="title">Input</div><pre>5<br />set economicsessay 1<br />remove economicsessay<br />undo 1<br />undo 1<br />query economicsessay<br /></pre></div><div class="output"><div class="title">Output</div><pre>-1<br /></pre></div></div></div></div><p>  </p></div></body></html>
